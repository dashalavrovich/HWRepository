<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clock_Canvas</title>
  </head>
  <body>
    <canvas id="cva"></canvas>
    <script>
      var cvs = document.getElementById("cva");
      var ctx = cvs.getContext("2d");

      function buildClock(number) {
        // movement of the arrows
        function pos() {
          ctx.clearRect(0, 0, cvs.width, cvs.height);

          // clock
          cvs.setAttribute("height", number * 2);
          cvs.setAttribute("width", number * 2);
          cvs.style.background = "lightyellow";

          ctx.beginPath();
          ctx.arc(number, number, number, 0, Math.PI * 2, false);
          ctx.strokeStyle = "blue";
          ctx.fillStyle = "red";
          ctx.lineWidth = 3;
          ctx.stroke();
          ctx.fill();

          for (let h = 1; h <= 12; h++) {
            const angle = (((360 / 12) * h) / 180) * Math.PI;

            const numbersDistance = number * 0.8;

            const numberX = number + Math.sin(angle) * numbersDistance;
            const numberY = number - Math.cos(angle) * numbersDistance;

            // orange circles
            ctx.strokeStyle = "black";
            ctx.fillStyle = "orange";
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(numberX, numberY, number * 0.12, 0, Math.PI * 2, false);
            ctx.stroke();
            ctx.fill();

            // numbers in orange circles
            ctx.fillStyle = "black";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.font = "italic 20px Arial";
            ctx.fillText(h, numberX, numberY);
          }

          // russian time formatting
          function formatDateTime(dt) {
            const hours = dt.getHours();
            const minutes = dt.getMinutes();
            const seconds = dt.getSeconds();
            return (
              str0l(hours, 2) +
              ":" +
              str0l(minutes, 2) +
              ":" +
              str0l(seconds, 2)
            );
          }
          function str0l(val, len) {
            let strVal = val.toString();
            while (strVal.length < len) strVal = "0" + strVal;
            return strVal;
          }

          const time = new Date();

			 // second hand - angle
			 const secDistance=number * 0.6;
          const secAngle =(360 / 60) *  time.getSeconds();

          const secX = number - Math.cos(secAngle) * secDistance;
          const secY = number + Math.sin(secAngle) * secDistance;

          // second hand
          ctx.beginPath();
          ctx.moveTo(number, number);
          ctx.lineTo(secX, secY);
          ctx.strokeStyle = "black";
          ctx.lineWidth = 4;
          ctx.lineCap = "round";
          ctx.stroke();

          ctx.fillText(formatDateTime(time), number, number / 2);

          setTimeout(pos, 1010 - time.getMilliseconds());
        }

        pos();
      }
      buildClock(300);
    </script>
  </body>
</html>
